import{d as w,e as _,_ as f,c,o as d,b as n,w as m,r as a,F as p,f as h,g as S,h as k,i as v,t as x}from"./index-D4aqKguY.js";const V=w("adminStore",{state:()=>({userList:[],userPage:{size:0,number:0,totalElements:0,totalPages:0}}),actions:{getUserList(o){_.get("/user/all",{params:o}).then(e=>{this.userList=e.data.payload.content,this.userPage=e.data.payload.page})},removeUser(o){return _.post("/user/remove",o)}}}),I={name:"UserTable",data(){return{adminStore:null,page:1,itemsPerPage:10,username:"",role:"",headers:[{title:"ID",align:"start",sortable:!1,key:"id"},{title:"Username",key:"username",align:"end"},{title:"Roles",key:"roleSet",align:"end"},{title:"Actions",key:"actions",align:"end"}],search:"",loading:!0,totalItems:0}},methods:{loadItems({page:o,itemsPerPage:e}){const l={page:o?o-1:this.page-1,size:e||this.itemsPerPage,username:this.username,role:this.role};this.adminStore.getUserList(l)},removeUser(o){if(confirm("Remove user "+o.username+" ?")){const e=this.page,l=this.itemsPerPage;this.adminStore.removeUser(o).then(()=>this.loadItems({page:e,itemsPerPage:l}))}}},beforeMount(){this.adminStore=V()}};function A(o,e,l,b,t,r){const i=a("v-text-field"),g=a("v-btn"),P=a("v-row"),y=a("v-chip"),U=a("v-data-table-server");return d(),c(p,null,[n(P,null,{default:m(()=>[n(i,{label:"username","max-width":"300",modelValue:t.username,"onUpdate:modelValue":e[0]||(e[0]=s=>t.username=s),onKeydown:h(r.loadItems,["enter"])},null,8,["modelValue","onKeydown"]),n(i,{label:"role","max-width":"300",modelValue:t.role,"onUpdate:modelValue":e[1]||(e[1]=s=>t.role=s),onKeydown:h(r.loadItems,["enter"])},null,8,["modelValue","onKeydown"]),n(g,{density:"comfortable",icon:"mdi-refresh",color:"blue",onClick:r.loadItems},null,8,["onClick"])]),_:1}),n(U,{"items-per-page":t.itemsPerPage,"onUpdate:itemsPerPage":e[2]||(e[2]=s=>t.itemsPerPage=s),page:t.page,"onUpdate:page":e[3]||(e[3]=s=>t.page=s),headers:t.headers,items:t.adminStore.userList,"items-length":t.adminStore.userPage.totalElements,search:t.search,"onUpdate:options":r.loadItems},{"item.roleSet":m(({item:s})=>[(d(!0),c(p,null,S(s.roleSet,u=>(d(),k(y,{color:u.role==="ADMIN"?"primary":"secondary",variant:"flat"},{default:m(()=>[v(x(u.role),1)]),_:2},1032,["color"]))),256))]),"item.actions":m(({item:s})=>[n(g,{density:"comfortable",icon:"mdi-delete",color:"red",onClick:u=>r.removeUser(s)},null,8,["onClick"])]),_:1},8,["items-per-page","page","headers","items","items-length","search","onUpdate:options"])],64)}const C=f(I,[["render",A]]),L={name:"AdminView",components:{UserTable:C}};function K(o,e,l,b,t,r){const i=a("user-table");return d(),c(p,null,[e[0]||(e[0]=v(" Admin Page ",-1)),n(i)],64)}const D=f(L,[["render",K]]);export{D as default};
